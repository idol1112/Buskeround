<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="artist">

	<!-- 아티스트 종합랭킹 리스트 -->
	<select id="getArtist" resultType="UserVo">
		<![CDATA[
          SELECT
              rn,
              ort.user_no, 
	          ort.id,
	          ort.password,
	          ort.email,
	          ort.nickname,
	          ort.user_img,
	          ort.name,
	          ort.hp,
	          ort.gender,
	          ort.birthday,
	          ort.genre,
	          ort.genre_type,
	          ort.fan,
	          ort.likes,
	          ort.live,
	          TO_CHAR(ort.artist_regdate, 'YYYY') artist_regdate,
	          ort.user_type,
	          ort.company_type,
              ort.ranking_score
              
          FROM (	      SELECT
              rownum rn,  
	          ot.user_no,
	          ot.id,
	          ot.password,
	          ot.email,
	          ot.nickname,
	          ot.user_img,
	          ot.name,
	          ot.hp,
	          ot.gender,
	          ot.birthday,
	          ot.genre,
	          ot.genre_type,
	          ot.fan,
	          ot.likes,
	          ot.live,
	          ot.artist_regdate,
	          ot.user_type,
	          ot.company_type,
              ot.ranking_score
	          
	      FROM (	      SELECT
	      
	          user_no, 
	          id,
	          password,
	          email,
	          nickname,
	          user_img,
	          name,
	          hp,
	          gender,
	          birthday,
	          genre,
	          genre_type,
	          fan,
	          likes,
	          live,
	          artist_regdate,
	          user_type,
	          company_type,
              ranking_score
	          
	      FROM users
	      where user_type = 2 ORDER by ranking_score desc) ot) ort
          where rn >=1
          and rn <=10
          
		]]>
	</select>


	<!-- 아티스트 라이브 리스트 -->
	<select id="getArtistLive" resultType="UserVo">
		<![CDATA[
        SELECT
              rn,
              ort.user_no, 
	          ort.id,
	          ort.password,
	          ort.email,
	          ort.nickname,
	          ort.user_img,
	          ort.name,
	          ort.hp,
	          ort.gender,
	          ort.birthday,
	          ort.genre,
	          ort.genre_type,
	          ort.fan,
	          ort.likes,
	          ort.live,
	          TO_CHAR(ort.artist_regdate, 'YYYY') artist_regdate,
	          ort.user_type,
	          ort.company_type,
              ort.ranking_score
              
          FROM (	      SELECT
              rownum rn,  
	          ot.user_no,
	          ot.id,
	          ot.password,
	          ot.email,
	          ot.nickname,
	          ot.user_img,
	          ot.name,
	          ot.hp,
	          ot.gender,
	          ot.birthday,
	          ot.genre,
	          ot.genre_type,
	          ot.fan,
	          ot.likes,
	          ot.live,
	          ot.artist_regdate,
	          ot.user_type,
	          ot.company_type,
              ot.ranking_score
	          
	      FROM (	      SELECT
	      
	          user_no, 
	          id,
	          password,
	          email,
	          nickname,
	          user_img,
	          name,
	          hp,
	          gender,
	          birthday,
	          genre,
	          genre_type,
	          fan,
	          likes,
	          live,
	          artist_regdate,
	          user_type,
	          company_type,
              ranking_score
	          
	      FROM users
	      where users.live = 1 
          ORDER by users.ranking_score desc, users.artist_regdate asc) ot) ort
          where rn >=1
          and rn <=10
		]]>
	</select>
	
	
	<!-- 팬 많은 순 리스트 -->
		<select id="getArtistFan" resultType="UserVo">
		<![CDATA[
        SELECT
              rn,
              ort.user_no, 
	          ort.id,
	          ort.password,
	          ort.email,
	          ort.nickname,
	          ort.user_img,
	          ort.name,
	          ort.hp,
	          ort.gender,
	          ort.birthday,
	          ort.genre,
	          ort.genre_type,
	          ort.fan,
	          ort.likes,
	          ort.live,
	          TO_CHAR(ort.artist_regdate, 'YYYY') artist_regdate,
	          ort.user_type,
	          ort.company_type,
              ort.ranking_score
              
          FROM (	      SELECT
              rownum rn,  
	          ot.user_no,
	          ot.id,
	          ot.password,
	          ot.email,
	          ot.nickname,
	          ot.user_img,
	          ot.name,
	          ot.hp,
	          ot.gender,
	          ot.birthday,
	          ot.genre,
	          ot.genre_type,
	          ot.fan,
	          ot.likes,
	          ot.live,
	          ot.artist_regdate,
	          ot.user_type,
	          ot.company_type,
              ot.ranking_score
	          
	      FROM (	      SELECT
	      
	          user_no, 
	          id,
	          password,
	          email,
	          nickname,
	          user_img,
	          name,
	          hp,
	          gender,
	          birthday,
	          genre,
	          genre_type,
	          fan,
	          likes,
	          live,
	          artist_regdate,
	          user_type,
	          company_type,
              ranking_score
	          
	      FROM users
	      where user_type = 2 
          ORDER by users.fan DESC, users.artist_regdate asc) ot) ort
          where rn >=1
          and rn <=10		
		]]>
	</select>
	
	
	<!-- new 아티스트 리스트 -->	
		<select id="getArtistNew" resultType="UserVo" >
		<![CDATA[
		SELECT
              rn,
              ort.user_no, 
	          ort.id,
	          ort.password,
	          ort.email,
	          ort.nickname,
	          ort.user_img,
	          ort.name,
	          ort.hp,
	          ort.gender,
	          ort.birthday,
	          ort.genre,
	          ort.genre_type,
	          ort.fan,
	          ort.likes,
	          ort.live,
	          TO_CHAR(ort.artist_regdate, 'YYYY') artist_regdate,
	          ort.user_type,
	          ort.company_type,
              ort.ranking_score
              
          FROM (	      SELECT
              rownum rn,  
	          ot.user_no,
	          ot.id,
	          ot.password,
	          ot.email,
	          ot.nickname,
	          ot.user_img,
	          ot.name,
	          ot.hp,
	          ot.gender,
	          ot.birthday,
	          ot.genre,
	          ot.genre_type,
	          ot.fan,
	          ot.likes,
	          ot.live,
	          ot.artist_regdate,
	          ot.user_type,
	          ot.company_type,
              ot.ranking_score
	          
	      FROM (	      SELECT
	      
	          user_no, 
	          id,
	          password,
	          email,
	          nickname,
	          user_img,
	          name,
	          hp,
	          gender,
	          birthday,
	          genre,
	          genre_type,
	          fan,
	          likes,
	          live,
	          artist_regdate,
	          user_type,
	          company_type,
              ranking_score
	          
	      FROM users
	      where user_type = 2 
          ORDER by users.artist_regdate desc) ot) ort
          where rn >=1
          and rn <=10
		]]>
	</select>
	
	<!-- 아티스트 장르 리스트 -->
		<select id="getArtistGenre" resultType="UserVo" parameterType="int">
		<![CDATA[
	    SELECT
              rn,
              ort.user_no, 
	          ort.id,
	          ort.password,
	          ort.email,
	          ort.nickname,
	          ort.user_img,
	          ort.name,
	          ort.hp,
	          ort.gender,
	          ort.birthday,
	          ort.genre,
	          ort.genre_type,
	          ort.fan,
	          ort.likes,
	          ort.live,
	          TO_CHAR(ort.artist_regdate, 'YYYY') artist_regdate,
	          ort.user_type,
	          ort.company_type,
              ort.ranking_score
              
          FROM (	      SELECT
              rownum rn,  
	          ot.user_no,
	          ot.id,
	          ot.password,
	          ot.email,
	          ot.nickname,
	          ot.user_img,
	          ot.name,
	          ot.hp,
	          ot.gender,
	          ot.birthday,
	          ot.genre,
	          ot.genre_type,
	          ot.fan,
	          ot.likes,
	          ot.live,
	          ot.artist_regdate,
	          ot.user_type,
	          ot.company_type,
              ot.ranking_score
	          
	      FROM (	      SELECT
	      
	          user_no, 
	          id,
	          password,
	          email,
	          nickname,
	          user_img,
	          name,
	          hp,
	          gender,
	          birthday,
	          genre,
	          genre_type,
	          fan,
	          likes,
	          live,
	          artist_regdate,
	          user_type,
	          company_type,
              ranking_score
	          
	      FROM users
	      where users.genre = #{no} 
          ORDER by users.ranking_score desc) ot) ort
          where rn >=1
          and rn <=10
    ]]>
	</select>
	

		
	
	<!-- 팬 되기 리스트 -->
	<select id="getFanList" resultType="UserVo">
		<![CDATA[
		select
            rn,
            ort.id,
		    ort.user_img,
		    ort.genre,
		    ort.genre_type,
		    ort.fan,
		    ort.likes,
		    ort.artist_regdate,
		    ort.fan_no,
		    ort.nickname,
		    ort.user_no,
		    ort.artist_no

		from(       select
            rownum rn,
            ot.id,
		    ot.user_img,
		    ot.genre,
		    ot.genre_type,
		    ot.fan,
		    ot.likes,
		    ot.artist_regdate,
		    ot.fan_no,
		    ot.nickname,
		    ot.user_no,
		    ot.artist_no

		from(		SELECT
		
		    id,
		    u.user_img,
		    u.genre,
		    u.genre_type,
		    u.fan,
		    u.likes,
		    u.artist_regdate,
		    f.fan_no,
		    u.nickname,
		    f.user_no,
		    f.artist_no
		FROM users u, fan f
		WHERE u.user_no = f.fan_no and f.user_no = u.user_no
        order by f.fan_no asc )ot)ort
        where rn >=1
        and rn <=10
		]]>		
	</select>

	<!-- 블로그 라이브 리스트 가져오기 -->
	<select id="getBlogLive" resultType="UserVo">
	<![CDATA[
	SELECT
              rn,
              ort.user_no, 
	          ort.id,
	          ort.password,
	          ort.email,
	          ort.nickname,
	          ort.user_img,
	          ort.name,
	          ort.hp,
	          ort.gender,
	          ort.birthday,
	          ort.genre,
	          ort.genre_type,
	          ort.fan,
	          ort.likes,
	          ort.live,
	          TO_CHAR(ort.artist_regdate, 'YYYY') artist_regdate,
	          ort.user_type,
	          ort.company_type,
              ort.ranking_score
              
          FROM (	      SELECT
              rownum rn,  
	          ot.user_no,
	          ot.id,
	          ot.password,
	          ot.email,
	          ot.nickname,
	          ot.user_img,
	          ot.name,
	          ot.hp,
	          ot.gender,
	          ot.birthday,
	          ot.genre,
	          ot.genre_type,
	          ot.fan,
	          ot.likes,
	          ot.live,
	          ot.artist_regdate,
	          ot.user_type,
	          ot.company_type,
              ot.ranking_score
	          
	      FROM (	      SELECT
	      
	          user_no, 
	          id,
	          password,
	          email,
	          nickname,
	          user_img,
	          name,
	          hp,
	          gender,
	          birthday,
	          genre,
	          genre_type,
	          fan,
	          likes,
	          live,
	          artist_regdate,
	          user_type,
	          company_type,
              ranking_score
	          
	      FROM users
	      where users.live = 1 
          ORDER by users.ranking_score desc, users.artist_regdate asc) ot) ort
          where rn >=1
          and rn <=6
		]]>		
	</select>


</mapper>