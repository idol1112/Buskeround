<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="map">

	<select id="mapList" resultType="MapVo">
		<![CDATA[
			select p.latitude,p.longitude,u.nickname,u.genre
			from
			post      p,
			category  c,
			users 	  u
			WHERE p.category_no = c.category_no
	      	AND c.user_no = u.user_no
			AND p_end is null
		]]>
	</select>

	<select id="findMap" parameterType="map" resultType="MapVo">
		<![CDATA[
			SELECT p.latitude,p.longitude,u.nickname,p.address
			FROM
			post      p,
			category  c,
			users u
			WHERE p.category_no = c.category_no
	      	AND c.user_no = u.user_no
		  	and latitude < #{nlat}
		  	and longitude < #{nlng}
		  	and latitude > #{slat}
		  	and longitude > #{slng}
		  	and p_end is null
		]]>
	</select>
</mapper>